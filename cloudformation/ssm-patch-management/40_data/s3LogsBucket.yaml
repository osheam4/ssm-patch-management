
AWSTemplateFormatVersion: '2010-09-09'
Description: S3 Stack

Parameters:
  ProjectLower:
    Type: String
  UniqueIdentifier:
    Type: String

Resources:
  # Bucket for Patch Maintenance Window Logs
  PatchTaskLogsBucket:
    Type: AWS::S3::Bucket
    Properties:
      BucketName: !Join
        - '-'
        - - !Sub '${ProjectLower}'
          - !Sub '${UniqueIdentifier}'
          - 'logs'
      BucketEncryption:
        ServerSideEncryptionConfiguration:
          - ServerSideEncryptionByDefault:
              SSEAlgorithm: AES256
      LifecycleConfiguration:
        Rules:
        - ExpirationInDays: 30
          Id: "Delete Logs after 30 days"
          Status: Enabled
          # Transitions:
          # - StorageClass: GLACIER
          #   TransitionInDays: 30